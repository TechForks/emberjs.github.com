

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ember.js - Controllers</title>
    <link rel="shortcut icon" href="/images/favicon.png" />
    <link href="/stylesheets/site.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.bxSlider.min.js"></script>

    <script type="text/javascript">
      $(function() {
        var backToTop = $('#back-to-top');
        var doc = $(document);
        var offset = backToTop.offset();
        var marginTop = 90;
        var showing = false;

        positionBackToTop = function(reset) {
          if (reset) {
            backToTop.css({
              top: '',
              position: ''
            });
            offset = backToTop.offset();
          }

          if (!showing && doc.scrollTop() > offset.top+200) {
            showing = true;
            backToTop.css({
              opacity: 1,
              position: 'fixed',
              top: 20,
              left: offset.left
            });
          } else if (showing && doc.scrollTop() <= offset.top+200) {
            showing = false;
            backToTop.css({
              opacity: 0
            });
          }
        };

        if (backToTop.length) {
          backToTop.on('click', function(evt) {
            $('html,body').animate({scrollTop: 0}, 200);
            return false;
          });

          doc.on('scroll', function() {
            positionBackToTop();
          });
        }

        $('.bx-wrapper, .bx-window').width(940);
      });
    </script>

    
  </head>

  <body class="guides guides_controllers guides_controllers_index">
    <div id="header">
      <div id="wrapper">
        <a id="logo" href="/">&nbsp;</a>
        <ul id="nav">
          <li><a href="/about">about</a></li>
          <li class="active"><a href="/guides">guides</a></li>
          <li><a href="/api">api</a></li>
          <li><a href="/community">community</a></li>
          <li><a href="/blog">blog</a></li>
        </ul>
        <div id="github">
          <a href="https://github.com/emberjs/ember.js"><img src="/images/fork-us.png">Fork Us!</a>
        </div>
      </div>
    </div>

    <div id="content-wrapper">
      
      
        <div id="sidebar">
          
    
    
    
    
    
    <ol id="guide_list"><li class="level-1"><a href="/guides/getting-started/core-concepts">Getting Started with Ember.js</a><ol><li class="level-3"><a href="/guides/getting-started/core-concepts">Core Concepts</a></li></ol></li><li class="level-1"><a href="/guides/application">Application</a><ol><li class="level-3"><a href="/guides/application">Introduction</a></li><li class="level-3"><a href="/guides/application/the-application-template">The Application Template</a></li></ol></li><li class="level-1"><a href="/guides/templates/handlebars-basics">Templates</a><ol><li class="level-3"><a href="/guides/templates/handlebars-basics">Handlebars Basics</a></li><li class="level-3"><a href="/guides/templates/conditionals">Conditionals</a></li><li class="level-3"><a href="/guides/templates/displaying-a-list-of-items">Displaying a List of Items</a></li><li class="level-3"><a href="/guides/templates/changing-scope">Changing Scope</a></li><li class="level-3"><a href="/guides/templates/binding-element-attributes">Binding Element Attributes</a></li><li class="level-3"><a href="/guides/templates/binding-element-class-names">Binding Element Class Names</a></li><li class="level-3"><a href="/guides/templates/links">Links</a></li><li class="level-3"><a href="/guides/templates/actions">Actions</a></li><li class="level-3"><a href="/guides/templates/writing-helpers">Writing Helpers</a></li></ol></li><li class="level-1"><a href="/guides/routing">Routing</a><ol><li class="level-3"><a href="/guides/routing">Introduction</a></li><li class="level-3"><a href="/guides/routing/defining-your-routes">Defining Your Routes</a></li><li class="level-3"><a href="/guides/routing/specifying-a-routes-model">Specifying a Route's Model</a></li><li class="level-3"><a href="/guides/routing/setting-up-a-controller">Setting Up a Controller</a></li><li class="level-3"><a href="/guides/routing/rendering-a-template">Rendering a Template</a></li><li class="level-3"><a href="/guides/routing/redirection">Redirecting to a Different URL</a></li></ol></li><li class="level-1 selected"><a href="/guides/controllers">Controllers</a><ol class='selected'><li class="level-3"><a href="/guides/controllers">Introduction</a></li></ol></li><li class="level-1"><a href="/guides/models">Models</a><ol><li class="level-3"><a href="/guides/models">Introduction</a></li><li class="level-3"><a href="/guides/models/defining-a-store">Defining a Store</a></li><li class="level-3"><a href="/guides/models/defining-models">Defining Models</a></li><li class="level-3"><a href="/guides/models/finding-models">Finding Models</a></li><li class="level-3"><a href="/guides/models/modifying-attributes">Modifying Attributes</a></li><li class="level-3"><a href="/guides/models/model-lifecycle">Model Lifecycle</a></li><li class="level-3"><a href="/guides/models/the-rest-adapter">The REST Adapter</a></li></ol></li><li class="level-1"><a href="/guides/views/">Views</a><ol><li class="level-3"><a href="/guides/views/">Introduction</a></li><li class="level-3"><a href="/guides/views/defining-a-view">Defining a View</a></li><li class="level-3"><a href="/guides/views/handling-events">Handling Events</a></li><li class="level-3"><a href="/guides/views/inserting-views-in-templates">Inserting Views in Templates</a></li><li class="level-3"><a href="/guides/views/customizing-a-views-element">Customizing a View's Element</a></li><li class="level-3"><a href="/guides/views/built-in-views">Built-in Views</a></li><li class="level-3"><a href="/guides/views/manually-managing-view-hierarchy">Manually Managing View Hierarchy</a></li></ol></li><li class="level-1"><a href="/guides/object-model/classes-and-instances">The Object Model</a><ol><li class="level-3"><a href="/guides/object-model/classes-and-instances">Classes and Instances</a></li><li class="level-3"><a href="/guides/object-model/observers">Observers</a></li><li class="level-3"><a href="/guides/object-model/computed-properties">Computed Properties</a></li><li class="level-3"><a href="/guides/object-model/computed-properties-and-aggregate-data">Computed Properties and Aggregate Data with @each</a></li><li class="level-3"><a href="/guides/object-model/bindings">Bindings</a></li><li class="level-3"><a href="/guides/object-model/reopening-classes-and-instances">Reopening Classes and Instances</a></li><li class="level-3"><a href="/guides/object-model/what-do-i-use-when">Bindings, Observers, Computed Properties: What Do I Use When?</a></li></ol></li><li class="level-1"><a href="/guides/enumerables">Enumerables</a><ol><li class="level-3"><a href="/guides/enumerables">Introduction</a></li></ol></li><li class="level-1"><a href="/guides/configuring-ember/disabling-prototype-extensions">Configuring Ember.js</a><ol><li class="level-3"><a href="/guides/configuring-ember/disabling-prototype-extensions">Disabling Prototype Extensions</a></li></ol></li><li class="level-1"><a href="/guides/understanding-ember/the-view-layer">Understanding Ember.js</a><ol><li class="level-3"><a href="/guides/understanding-ember/the-view-layer">The View Layer</a></li><li class="level-3"><a href="/guides/understanding-ember/managing-asynchrony">Managing Asynchrony</a></li><li class="level-3"><a href="/guides/understanding-ember/keeping-templates-up-to-date">Keeping Templates Up-to-Date</a></li></ol></li></ol>
  
          <div id="back-to-top"><a href="#">&#11014; Back to Top</a></div>
        </div>
      
      <div id="content" class="has-sidebar">
          

  <div class="chapter">
    <h1> Controllers </h1>
    <h2 id='toc_controllers'>Controllers</h2>
<p>A controller may have one or both of these responsibilities:</p>

<ul>
<li>Representing a model for a template.</li>
<li>Storing application properties that do not need to be saved to the server.</li>
</ul>

<p>Most of your controllers will be very small. Unlike other
frameworks, where the state of your application is spread amongst many
controllers, in Ember.js, we encapsulate that state in the router. This
allows your controllers to be lightweight and focused on one thing.</p>
<h3 id='toc_representing-models'>Representing Models</h3>
<p>Templates are always connected to controllers, not models. This makes it
easy to separate display-specific properties from model-specific
properties.</p>

<p>Often, however, it is convenient for your templates to be able to
retrieve properties directly from a model. Ember.js makes this easy with
<code>Ember.ObjectController</code> and <code>Ember.ArrayController</code>.</p>
<h4 id='toc_representing-a-single-model'>Representing a Single Model</h4>
<p>Use <code>Ember.ObjectController</code> to represent a single model. To tell an
<code>ObjectController</code> which model to represent, set its <code>content</code>
property in your route&#39;s <code>setupControllers</code> method.</p>

<p>When a template asks an <code>ObjectController</code> for a property, it will first
check to see if it has its own property with that name defined. If so, it will
return its current value.</p>

<p>However, if the controller does not have a property with that name defined, it
will return the value of the property on the model.</p>

<p>For example, imagine you are writing a music player. You have defined
your <code>SongController</code> to represent the currently playing song.</p>
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
</pre></td>
  <td class="code"><pre>App.SongController = Ember.ObjectController.extend({
  <span class="key">soundVolume</span>: <span class="integer">1</span>
});
</pre></td>
</tr></table>
</div>
<p>In your router, you set the <code>content</code> of the controller to the
currently playing song:</p>
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>App.SongRoute = Ember.Route.extend({
  <span class="function">setupControllers</span>: <span class="keyword">function</span>(controller, song) {
    controller.set(<span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>, song);
  }
});
</pre></td>
</tr></table>
</div>
<p>In your template, you want to display the name of the currently playing
song, as well as the volume at which it is playing.</p>
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="tag">&lt;p&gt;</span>
  <span class="tag">&lt;strong&gt;</span>Song<span class="tag">&lt;/strong&gt;</span>: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">name</span><span class="inline-delimiter">}}</span></span> by <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">artist</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p&gt;</span>
  <span class="tag">&lt;strong&gt;</span>Current Volume<span class="tag">&lt;/strong&gt;</span>: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">soundVolume</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/p&gt;</span>
</pre></td>
</tr></table>
</div>
<p>Because <code>name</code> and <code>artist</code> are persisted information, and thus stored
on the model, the controller looks them up there and provides them to
the template.</p>

<p><code>soundVolume</code>, however, is specific to the current user&#39;s session, and
thus stored on the controller. The controller can return its own value
without consulting the model.</p>

<p>The advantage of this architecture is that it is easy to get started
by accessing the properties of the model via the object controller. If,
however, you need to transform a model property for a template, there is
a well-defined place to do so without adding view-specific concerns to
the model.</p>

<p>For example, imagine we want to display the duration of the song:</p>
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="tag">&lt;p&gt;</span>
  <span class="tag">&lt;strong&gt;</span>Song<span class="tag">&lt;/strong&gt;</span>: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">name</span><span class="inline-delimiter">}}</span></span> by <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">artist</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p&gt;</span>
  <span class="tag">&lt;strong&gt;</span>Duration<span class="tag">&lt;/strong&gt;</span>: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">duration</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/p&gt;</span>
</pre></td>
</tr></table>
</div>
<p>This is saved on the server as an integer representing the number of
seconds, so our first attempt looks like this:</p>
<div class="highlight html "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="tag">&lt;p&gt;</span>
  <span class="tag">&lt;strong&gt;</span>Song<span class="tag">&lt;/strong&gt;</span>: 4 Minute Warning by Radiohead
<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p&gt;</span>
  <span class="tag">&lt;strong&gt;</span>Duration<span class="tag">&lt;/strong&gt;</span>: 257
<span class="tag">&lt;/p&gt;</span>
</pre></td>
</tr></table>
</div>
<p>Since our users are humans and not robots, however, we&#39;d like to display
the duration as a formatted string.</p>

<p>This is very easy to do by defining a computed property on the
controller that transforms the model&#39;s value into a format more useful
by the template:</p>
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>App.SongController = Ember.ObjectController.extend({
  <span class="function">duration</span>: <span class="keyword">function</span>() {
    <span class="keyword">var</span> duration = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">content.duration</span><span class="delimiter">'</span></span>),
         minutes = Math.floor(duration / <span class="integer">60</span>),
         seconds = duration % <span class="integer">60</span>;

    <span class="keyword">return</span> [minutes, seconds].join(<span class="string"><span class="delimiter">'</span><span class="content">:</span><span class="delimiter">'</span></span>);
  }.property(<span class="string"><span class="delimiter">'</span><span class="content">content.duration</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div>
<p>Now, the output of our template is a lot friendlier:</p>
<div class="highlight html "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="tag">&lt;p&gt;</span>
  <span class="tag">&lt;strong&gt;</span>Song<span class="tag">&lt;/strong&gt;</span>: 4 Minute Warning by Radiohead
<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p&gt;</span>
  <span class="tag">&lt;strong&gt;</span>Duration<span class="tag">&lt;/strong&gt;</span>: 4:17
<span class="tag">&lt;/p&gt;</span>
</pre></td>
</tr></table>
</div><h4 id='toc_representing-multiple-models'>Representing Multiple Models</h4>
<p>You can use <code>Ember.ArrayController</code> to represent an array of models. To tell an
<code>ArrayController</code> which model to represent, set its <code>content</code> property
in your route&#39;s <code>setupControllers</code> method.</p>

<p>You can treat an <code>ArrayController</code> just like its underlying array. For
example, imagine we want to display the current playlist. In our router,
we set tell our <code>SongsController</code> to represent the songs in the playlist:</p>
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>App.SongsRoute = Ember.Route.extend({
  <span class="function">setupControllers</span>: <span class="keyword">function</span>(controller, playlist) {
    controller.set(<span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>, playlist.get(<span class="string"><span class="delimiter">'</span><span class="content">songs</span><span class="delimiter">'</span></span>));
  }
});
</pre></td>
</tr></table>
</div>
<p>In the <code>songs</code> template, we can use the <code>{{#each}}</code> helper to display
each song:</p>
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="tag">&lt;h1&gt;</span>Playlist<span class="tag">&lt;/h1&gt;</span>

<span class="tag">&lt;ul&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">controller</span><span class="inline-delimiter">}}</span></span>
    <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">name</span><span class="inline-delimiter">}}</span></span> by <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">artist</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/li&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/ul&gt;</span>
</pre></td>
</tr></table>
</div>
<p>You can use the <code>ArrayController</code> to collect aggregate information about
the models it represents. For example, imagine we want to display the
number of songs that are over 30 seconds long. We can add a new computed
property called <code>longSongCount</code> to the controller:</p>
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre>App.SongsController = App.ArrayController.extend({
  <span class="function">longSongCount</span>: <span class="keyword">function</span>() {
    <span class="keyword">var</span> longSongs = <span class="local-variable">this</span>.filter(<span class="keyword">function</span>(song) {
      <span class="keyword">return</span> song.get(<span class="string"><span class="delimiter">'</span><span class="content">duration</span><span class="delimiter">'</span></span>) &gt; <span class="integer">30</span>;
    });
    <span class="keyword">return</span> longSongs.get(<span class="string"><span class="delimiter">'</span><span class="content">length</span><span class="delimiter">'</span></span>);
  }.property(<span class="string"><span class="delimiter">'</span><span class="content">@each.duration</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div>
<p>Now we can use this property in our template:</p>
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="tag">&lt;ul&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">controller</span><span class="inline-delimiter">}}</span></span>
    <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">name</span><span class="inline-delimiter">}}</span></span> by <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">artist</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/li&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/ul&gt;</span>

<span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">longSongCount</span><span class="inline-delimiter">}}</span></span> songs over 30 seconds.
</pre></td>
</tr></table>
</div><h2 id='toc_storing-application-properties'>Storing Application Properties</h2>
<p>Often, your application will need to store information that does not
belong in the model. Any time you need to save information that does not
need to be persisted to the server, you should put it in a controller.</p>

<p>For example, imagine your application has a search field that is always
present. You would have a <code>SearchController</code> with a <code>query</code> property, to
which the search field would be bound.</p>

<p>If your user wants to search, she would type her query in the search
field, then hit the enter key.</p>

<p>When your router initiates the query to the server, it should retrieve
the current query from the <code>SearchController</code>, instead of trying to
retrieve it from the search field.</p>

    
      <footer>
         
      </footer>
      
  </div>

  <script>
    $("#guide_list .level-1 > a").click(function() {
      $(this).parent().find('> ol').slideToggle(function() {
        positionBackToTop(true);
      });

      return false;
    });
  </script>

      </div>
    </div>

    <div id="footer">
      <div id="footer-wrapper">
        <div class="info">Copyright 2012 <a href="http://tilde.io">Tilde Inc.</a><br>Design by <a href="http://www.heropixel.com">HeroPixel</a></div>
        <div class="statement">Ember.js is free, open source and always will be.</div>
        <div class="links">
          <a class="twitter" href="http://twitter.com/emberjs">Twitter</a>
          <a class="github" href="https://github.com/emberjs/ember.js">GitHub</a>
          
        </div>
      </div>
    </div>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
